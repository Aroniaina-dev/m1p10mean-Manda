"use strict";(self.webpackChunkm1p10mean_Manda_Finaritra=self.webpackChunkm1p10mean_Manda_Finaritra||[]).push([[996],{80996:(M,u,s)=>{s.r(u),s.d(u,{AuthentificationModule:()=>_});var p=s(36895),d=s(76773),r=s(90433),e=s(98256),c=s(56074),g=s(97185);function f(i,l){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"div",26)(2,"a",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.signUpClient())}),e.\u0275\u0275element(3,"span",28),e.\u0275\u0275text(4,"Inscription "),e.\u0275\u0275elementEnd()()()}}function v(i,l){1&i&&(e.\u0275\u0275elementStart(0,"button",25),e.\u0275\u0275element(1,"i",26),e.\u0275\u0275text(2," Inscription en cours..."),e.\u0275\u0275elementEnd())}function b(i,l){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.login())}),e.\u0275\u0275text(1,"Se Connecter"),e.\u0275\u0275elementEnd()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",n.loader)}}const m=function(i,l){return{"is-valid":i,"is-invalid":l}},C=[{path:"",component:(()=>{class i{constructor(n,t,o,a){this.router=n,this.authentificationService=t,this.fb=o,this.toastr=a,this.loader=!1,this.email="",this.password="",this.isAdmin=!1,this.load=!0}ngOnInit(){this.load=!0,this.formGroup=this.fb.group({email:[this.email,[r.kI.required,r.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:[this.password,r.kI.required]})}get c(){return this.formGroup.controls}changeIsAdmin(){this.isAdmin=!this.isAdmin}login(){this.formGroup.valid?(this.loader=!0,this.authentificationService.login(this.email,this.password).subscribe(n=>{this.loader=!1,n&&(this.authentificationService.storeUserData(n.token,n.user),console.log(n.user.loginType),1==n.user.loginType?this.router.navigate(["/atelier"]):2==n.user.loginType?this.router.navigate(["/financier"]):(console.log("Mande ny mande"),this.router.navigate(["/clientuser"])))},n=>{this.loader=!1,this.toastr.error(n.error.msg)})):this.toastr.warning("Un des format de vos champs est incorrect")}signUpClient(){this.router.navigate(["/login/signUp"])}}return i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(c.g),e.\u0275\u0275directiveInject(r.qu),e.\u0275\u0275directiveInject(g._W))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-login"]],decls:32,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center","align-self-center"],[1,"contents"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-md-12"],[1,"form-block","mx-auto",2,"margin-top","20px","margin-bottom","20px"],[1,"text-center","mb-5"],["src","assets/img/autog.jpg","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-control-label"],["aria-hidden","true",1,"fa","fa-user"],["type","text","name","email","formControlName","email",1,"form-control",3,"ngModel","ngModelChange"],["aria-hidden","true",1,"fa","fa-unlock-alt"],["type","password","name","password","formControlName","password","i","",1,"form-control",3,"ngModel","ngModelChange"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit","value","Log In",1,"btn","btn-block","py-2","btn-primary"],[1,"or",2,"text-align","center","margin-left","50%"],["class","reseau",4,"ngIf"],["id","kc-registration"],[2,"text-align","center","margin-left","35%"],["type","checkbox","aria-label","Checkbox for following text input",3,"click"],["tabindex","6"],[1,"reseau"],[1,"facebook"],["href","","data-mdb-ripple-color","dark",1,"btn","btn-block","btn-info","btn-rounded",3,"click"],[1,"icon-facebook","mr-3"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.\u0275\u0275element(7,"img",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"form",8),e.\u0275\u0275listener("ngSubmit",function(){return t.login()}),e.\u0275\u0275elementStart(9,"div",9)(10,"label",10),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275text(12," EMAIL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"input",12),e.\u0275\u0275listener("ngModelChange",function(a){return t.email=a}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",9)(15,"label",10),e.\u0275\u0275element(16,"i",13),e.\u0275\u0275text(17," PASSWORD"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"input",14),e.\u0275\u0275listener("ngModelChange",function(a){return t.password=a}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",15)(20,"div",16),e.\u0275\u0275element(21,"div",17)(22,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"span",19),e.\u0275\u0275text(24,"or"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(25,f,5,0,"div",20),e.\u0275\u0275elementStart(26,"div",21)(27,"span",22)(28,"input",23),e.\u0275\u0275listener("click",function(){return t.changeIsAdmin()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(29,"Is Admin ? "),e.\u0275\u0275elementStart(30,"a",24),e.\u0275\u0275text(31,"Atelier/Financier"),e.\u0275\u0275elementEnd()()()()()()()()()),2&n&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",t.formGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t.email),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t.password),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!t.isAdmin))},dependencies:[p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:['.contents[_ngcontent-%COMP%]{margin-top:5%;margin-bottom:auto;border-radius:2%;width:40%;background:rgb(231,228,228);background:linear-gradient(86deg,rgba(231,228,228,1) 0%,rgba(238,238,238,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#e7e4e4",endColorstr="#eeeeee",GradientType=1)}.kc-registration[_ngcontent-%COMP%]{text-align:center;margin-left:10%}']}),i})(),canActivate:[(()=>{class i{constructor(n,t){this.authentificationService=n,this.router=t}canActivate(n,t){if(this.authentificationService.loggedIn()){const o=this.authentificationService.getUser();return console.log("User temps: ",o),0==o?.loginType?this.router.navigate(["/clientuser"]):1==o?.loginType?this.router.navigate(["/atelier"]):2==o?.loginType&&this.router.navigate(["/financier"]),!1}return!0}}return i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275inject(c.g),e.\u0275\u0275inject(d.F0))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()]},{path:"signUp",component:(()=>{class i{constructor(n,t,o,a){this.router=n,this.signUpService=t,this.fb=o,this.toastr=a,this.currentDate=new Date,this.loader=!1,this.load=!0,this.nom="",this.prenom="",this.email="",this.password="",this.phone="",this.loginType="0",this.voiture=[]}onSelected(n){console.log(n),this.loginType=n,this.ngOnInit()}ngOnInit(){this.load=!0,this.formGroup=this.fb.group({nom:[this.nom,r.kI.required],prenom:[this.prenom,r.kI.required],email:[this.email,[r.kI.required,r.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:[this.password,r.kI.required],phone:[this.phone],loginType:[this.loginType,r.kI.required],voiture:[this.voiture]})}get c(){return this.formGroup.controls}login(){this.router.navigate(["/"])}signUp(){this.formGroup.valid?(this.loader=!0,this.signUpService.signUp(this.formGroup.value).subscribe(n=>{this.loader=!1,n.error||(this.toastr.success("Vous \xeates inscrit"),this.router.navigate(["/"]))},n=>{this.loader=!1,this.toastr.error(n.error.msg)})):this.toastr.warning("Un des format de vos champs est incorrect")}handleUpload(n){const t=n.target.files[0],o=new FileReader;o.readAsDataURL(t),o.onload=()=>{console.log(this.formGroup.value)}}}return i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(c.g),e.\u0275\u0275directiveInject(r.qu),e.\u0275\u0275directiveInject(g._W))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-sign-up"]],decls:54,vars:28,consts:[["id","page-top"],["id","wrapper"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"],[1,"container-fluid"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[2,"text-align","center"],[3,"formGroup","ngSubmit"],[1,"card","shadow"],[1,"card-body"],[1,"col"],[1,"col-md-12"],[1,"form-group"],["type","text","formControlName","nom",1,"form-control",3,"ngModel","ngClass","ngModelChange"],[1,"invalid-feedback"],["type","text","formControlName","prenom",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["type","email","formControlName","email",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["type","password","formControlName","password",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["type","text","formControlName","phone",1,"form-control",3,"ngModel","ngClass","ngModelChange"],[1,"card-footer","text-right"],["type","submit",1,"btn","btn-primary","btn-block"],["class","btn btn-primary btn-block","type","button","disabled","",4,"ngIf"],["class","btn btn-success btn-block","type","button",3,"disabled","click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary","btn-block"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"btn","btn-success","btn-block",3,"disabled","click"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.\u0275\u0275element(6,"div",6),e.\u0275\u0275elementStart(7,"div",7)(8,"h1",8),e.\u0275\u0275text(9,"S'inscrire"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return t.signUp()}),e.\u0275\u0275elementStart(11,"div",10)(12,"div",11)(13,"div",5)(14,"div",12)(15,"div",4)(16,"div",5)(17,"div",13)(18,"div",14)(19,"label"),e.\u0275\u0275text(20,"Nom :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"input",15),e.\u0275\u0275listener("ngModelChange",function(a){return t.nom=a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",16),e.\u0275\u0275text(23," Veuillez remplir le champ "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",14)(25,"label"),e.\u0275\u0275text(26,"prenom :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"input",17),e.\u0275\u0275listener("ngModelChange",function(a){return t.prenom=a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",16),e.\u0275\u0275text(29," Veuillez remplir le champ "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",14)(31,"label"),e.\u0275\u0275text(32,"email :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"input",18),e.\u0275\u0275listener("ngModelChange",function(a){return t.email=a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",16),e.\u0275\u0275text(35," Veuillez remplir le champ "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",14)(37,"label"),e.\u0275\u0275text(38,"password :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"input",19),e.\u0275\u0275listener("ngModelChange",function(a){return t.password=a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",16),e.\u0275\u0275text(41," Veuillez remplir le champ "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",14)(43,"label"),e.\u0275\u0275text(44,"phone :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"input",20),e.\u0275\u0275listener("ngModelChange",function(a){return t.phone=a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",16),e.\u0275\u0275text(47," Veuillez remplir le champ "),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(48,"div",21)(49,"button",22),e.\u0275\u0275text(50,"S'inscrire"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(51,v,3,0,"button",23),e.\u0275\u0275template(52,b,2,1,"button",24),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(53,"div",6),e.\u0275\u0275elementEnd()()()()()()),2&n&&(e.\u0275\u0275advance(10),e.\u0275\u0275property("formGroup",t.formGroup),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngModel",t.nom)("ngClass",e.\u0275\u0275pureFunction2(13,m,t.c.nom.valid,t.c.nom.invalid&&(t.c.nom.dirty||t.c.nom.touched))),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngModel",t.prenom)("ngClass",e.\u0275\u0275pureFunction2(16,m,t.c.prenom.valid,t.c.prenom.invalid&&(t.c.prenom.dirty||t.c.prenom.touched))),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngModel",t.email)("ngClass",e.\u0275\u0275pureFunction2(19,m,t.c.email.valid,t.c.email.invalid&&(t.c.email.dirty||t.c.email.touched))),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngModel",t.password)("ngClass",e.\u0275\u0275pureFunction2(22,m,t.c.password.valid,t.c.password.invalid&&(t.c.password.dirty||t.c.password.touched))),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngModel",t.phone)("ngClass",e.\u0275\u0275pureFunction2(25,m,t.c.phone.valid,t.c.phone.invalid&&(t.c.phone.dirty||t.c.phone.touched))),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.loader),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader))},dependencies:[p.mk,p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),i})()}];let S=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.Bz.forChild(C),d.Bz]}),i})();var y=s(72271);let _=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.ez,S,y.m,r.u5]}),i})()}}]);